{"version":3,"sources":["webpack:///webpack/bootstrap 83e1e05701788a910f2c","webpack:///../src/helpers.js","webpack:///../src/urlsMapper.js","webpack:///../src/fetch.js","webpack:///../src/xhr.js","webpack:///../src/index.js"],"names":["createKey","url","method","toLowerCase","createNewTestValue","options","timeout","code","response","testKey","clearTestValues","key","forceWritable","object","value","Object","defineProperties","writable","urlMapper","window","fetch","console","error","tempFetch","fakeFetch","testUrl","testData","Promise","resolve","setTimeout","json","status","ok","statusText","setupFetchFakeServer","xhrCopy","name","cb","events","data","b","$$testData","$$defineMyPropsWritable","onreadystatechange","_emit","onload","loaded","_response","prop","OPENED","setupXhrFakeServer","XMLHttpRequest","fakeServer","init","set","clear"],"mappings":"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","file":"fake-server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"dist\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 83e1e05701788a910f2c","import { urlMapper } from './urlsMapper';\n\n// creates a key from a method and a url\nexport const createKey = (url, method) => (`${method}:${url}`).toLowerCase();\n\n// simple function to create a new test value\nexport const createNewTestValue = (options) => {\n  const { url = '', method = 'GET', timeout = 1, code = 200, response = {} } = options;\n\n  const testKey = createKey(url, method);\n  urlMapper[testKey] = { response, code, timeout };\n};\n\n//cleares the url mapper\nexport const clearTestValues = () => {\n  for (const key in urlMapper) {\n    delete urlMapper[key];\n  }\n};\n\n// forces a property to become writable\nexport const forceWritable = (object, key, value) => Object.defineProperties(object, {\n  [key]: {\n    value,\n    writable: true,\n  },\n});\n\n\n\n\n// WEBPACK FOOTER //\n// ../src/helpers.js","// holds key value pairs of fake requests and responses\nexport const urlMapper = {};\n\n\n\n// WEBPACK FOOTER //\n// ../src/urlsMapper.js","/* eslint-disable no-global-assign */\nimport { createKey, } from './helpers';\nimport { urlMapper, } from './urlsMapper';\n\nif (!window.fetch) {\n  window.fetch = () => { console.error('fetch is not supported'); };\n}\n\n// keep the original fetch to be used if we need it\nconst tempFetch = window.fetch;\n\n// create a fake fetch with similar api\nconst fakeFetch = (url, options = {}) => {\n  if (typeof url === 'object') {\n    // to handle when passing a Request object\n    options.method = url.method;\n    url = url.url;\n  }\n\n  const { method = 'GET', } = options;\n  const testUrl = createKey(url, method);\n  const testData = urlMapper[testUrl];\n\n  // no test data, make fetch work as usual\n  if (!testData) {\n    return tempFetch(url, options);\n  }\n\n  // return test values\n  const { response, timeout, code, } = testData;\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve({\n        json: () => response,\n        status: code,\n        ok: true,\n        statusText: 'OK',\n      });\n    }, timeout);\n  });\n};\n\n// assign our fake fetch to the real fetch\nexport const setupFetchFakeServer = () => {\n  window.fetch = fakeFetch;\n};\n\n\n\n// WEBPACK FOOTER //\n// ../src/fetch.js","// overriding XMLHttpRequest\nimport { createKey, forceWritable } from './helpers';\nimport { urlMapper } from './urlsMapper';\n\nclass xhrCopy {\n\n  addEventListener(name, cb) {\n    if (!this.events) {\n      this.events = {};\n    }\n    this.events[name] = cb;\n  }\n\n  _emit(name, data) {\n    if (!this.events) {\n      return;\n    }\n    if (this.events[name]) {\n      this.events[name](data);\n    }\n  }\n\n  open(method, url, b) {\n    const testUrl = createKey(url, method);\n    this.$$testData = urlMapper[testUrl];\n\n    // return this.$$defineMyPropsWritable('readyState', window.XMLHttpRequest.OPENED);\n  }\n\n  overrideMimeType() {\n    // just an interface\n  }\n\n  send() {\n    return setTimeout(() => {\n      this.$$defineMyPropsWritable('readyState', 4);\n      this.$$defineMyPropsWritable('status', this.$$testData.code);\n      if (this.onreadystatechange) {\n        this.onreadystatechange();\n      }\n\n      this._emit('load');\n      this._emit('loaded');\n      this._emit('loadend');\n      if (this.onload) {\n        onload();\n      }\n      if (this.loaded) {\n        this.loaded();\n      }\n    }, this.$$testData.timeout);\n  }\n\n  constructor() {\n    this._response = {};\n    this.$$defineMyPropsWritable('statusText', 'Replaced by xhrInterceptor, please make sure you never see this message in production');\n  }\n\n  // helper to define a writable property (when extending xhr)\n  $$defineMyPropsWritable(prop, value) {\n    return this[prop] = value;  // forceWritable(this, prop, value);\n  }\n\n  // this will appear as xhr data in the result\n  get responseText() {\n    if (this.$$testData) {\n      return this.$$testData.response;\n    }\n    return super.responseText;\n  }\n\n  get response() {\n    if (this.$$testData) {\n      return this.$$testData.response;\n    }\n    return super.responseText;\n  }\n}\n\nxhrCopy.OPENED = 4\n\nexport const setupXhrFakeServer = () => {\n  window.XMLHttpRequest = xhrCopy;\n};\n\n\n\n// WEBPACK FOOTER //\n// ../src/xhr.js","import { createNewTestValue, clearTestValues } from '../src/helpers';\nimport { setupFetchFakeServer } from '../src/fetch';\nimport { setupXhrFakeServer } from './xhr';\n\nconst fakeServer = {};\n\nfakeServer.init = () => {\n  setupXhrFakeServer();\n  setupFetchFakeServer();\n  return fakeServer;\n};\n\nfakeServer.set = (options) => {\n  createNewTestValue(options);\n  return fakeServer;\n};\n\nfakeServer.clear = () => {\n  clearTestValues();\n  return fakeServer;\n};\n\nexport default fakeServer;\n\n\n\n// WEBPACK FOOTER //\n// ../src/index.js"],"sourceRoot":""}